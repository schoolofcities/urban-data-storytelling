<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Spatial data in Python ‚Äì Urban Data Storytelling üìäüìàüèôÔ∏è</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap-d1fcf46c23e38b7e3acfb286f502517d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../../../assets/styles.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../../notebooks/urban-data-analytics/index.html">Urban Data Analytics</a></li><li class="breadcrumb-item"><a href="../../../notebooks/urban-data-analytics/spatial-data-in-python/spatial-data-in-python.html">Spatial data in Python</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../../../"><img src="https://raw.githubusercontent.com/schoolofcities/gta-immigration/refs/heads/main/src/assets/top-logo-full.svg" style="height:auto;width:220px"><br>Urban Data Storytelling üìäüìàüèôÔ∏è</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../notebooks/urban-data-analytics/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Urban Data Analytics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../notebooks/urban-data-analytics/what-and-where-of-data/what-and-where-of-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to urban data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../notebooks/urban-data-analytics/measuring-the-city/measuring-the-city.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Measuring the city: metrics and indicators</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../notebooks/urban-data-analytics/data-ethics-and-literacy/data-ethics-and-literacy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data ethics and literacy</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../notebooks/urban-data-analytics/intro-to-python-and-jupyter/intro-to-python-and-jupyter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Programming with Python and computational notebooks</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../notebooks/urban-data-analytics/data-analytics-and-processing/data-analytics-and-processing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Processing and analyzing data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../notebooks/urban-data-analytics/statistical-foundations/statistical-foundations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistical Foundations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../notebooks/urban-data-analytics/spatial-data-and-gis/spatial-data-and-gis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Spatial data and GIS</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../notebooks/urban-data-analytics/spatial-data-in-python/spatial-data-in-python.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Spatial data in Python</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../notebooks/urban-data-analytics/spatial-data-processing/spatial-data-processing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Spatial data processing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../notebooks/urban-data-analytics/canadian-census-data/canadian-census-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview of Canadian census data</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Urban Data Visualization</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../notebooks/urban-data-visualization/data-visualization/data-visualization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data visualization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../notebooks/urban-data-visualization/maps-and-spatial-data-visualization/maps-and-spatial-data-visualization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Maps and visualizing spatial data</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="99">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#loading-and-exploring-geometric-data" id="toc-loading-and-exploring-geometric-data" class="nav-link active" data-scroll-target="#loading-and-exploring-geometric-data">Loading and exploring geometric data</a></li>
  <li><a href="#plotting-geographic-data" id="toc-plotting-geographic-data" class="nav-link" data-scroll-target="#plotting-geographic-data">Plotting geographic data</a></li>
  <li><a href="#interactive-exploration" id="toc-interactive-exploration" class="nav-link" data-scroll-target="#interactive-exploration">Interactive Exploration</a></li>
  <li><a href="#geomtery-properties" id="toc-geomtery-properties" class="nav-link" data-scroll-target="#geomtery-properties">Geomtery properties</a></li>
  <li><a href="#processing-and-analyzing-spatial-data" id="toc-processing-and-analyzing-spatial-data" class="nav-link" data-scroll-target="#processing-and-analyzing-spatial-data">Processing and analyzing spatial data</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../../notebooks/urban-data-analytics/index.html">Urban Data Analytics</a></li><li class="breadcrumb-item"><a href="../../../notebooks/urban-data-analytics/spatial-data-in-python/spatial-data-in-python.html">Spatial data in Python</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Spatial data in Python</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>There are a variety of libraries, methods, and functions for working with spatial data in Python.</p>
<p><a href="https://geopandas.org/en/stable/index.html">GeoPandas</a> is a library for working with spatial (typically geographic) data. It is used a lot since it extends the functionality of pandas to support spatial data types and operations, making it easier to analyze, visualize, and manipulate spatial data.</p>
<p>Many of the tasks that are typically done within a GIS can be done via <code>geopandas</code>. And often, it is preferable to work in <code>geopandas</code> versus point-and-click GIS (e.g.&nbsp;QGIS) since it‚Äôs easier to chain together and automate processes, have access to the full capabilities of <code>pandas</code> and other Python libraries, as well as can be better scaled for handling very large datasets.</p>
<p>This tutorial provides and introduction to <code>geopandas</code>, its gemometry data types, how to quickly plot spatial data, and methods for spatial calculations (e.g.&nbsp;computing areas, bounding boxes, etc.). The last section of this tutorial provides direction for next steps, including libraries and examples for doing advanced spatial data processing, analyses, and visualizations.</p>
<p>Here are the links to download this notebook and example data: - <a href="../../../notebooks/urban-data-analytics/spatial-data-in-python/spatial-data-in-python.html" download="">Notebook</a> - <a href="data/ttc_routes.geojson" download="">Toronto transit routes</a> - <a href="data/ttc_stops.geojson" download="">Toronto transit stops</a> - <a href="data/ttc_stops.geojson" download="">Toronto transit stops</a> - <a href="data/city-wards.geojson" download="">Toronto wards</a></p>
<p>This tutorial assumes you have base knowledge of working with spatial data (e.g.&nbsp;in GIS) and working with dataframes in <code>pandas</code>. Check out the following if you want a refresher: - <a href="notebooks/urban-data-analytics/spatial-data-and-gis/spatial-data-and-gis.md">Spatial data in GIS</a> - <a href="notebooks/urban-data-analytics/data-analytics-and-processing/data-analytics-and-processing.ipynb">Data analytics and processing</a></p>
<p>We‚Äôll begin this tutorial by loading in <code>pandas</code>, <code>geopandas</code>, and <code>matplotlib</code> (the latter for showing how to quickly plot and view data). If you don‚Äôt have these installed already, you‚Äôll have to install them via <code>pip</code> or <code>conda</code>.</p>
<div id="5368d972-52f8-4ac4-b18d-15628b9b667f" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="loading-and-exploring-geometric-data" class="level2">
<h2 class="anchored" data-anchor-id="loading-and-exploring-geometric-data">Loading and exploring geometric data</h2>
<p>Geospatial data represents real-world features using three primary geometric types: - Points: Single (x,y) coordinates for discrete locations like transit stops or landmarks. - Lines: Connected sequences of points forming paths, such as roads or rivers. - Polygons: Closed shapes defining areas like census tracts or property boundaries.</p>
<div id="67116cce-650f-4f20-baac-4941679ad071" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>transit_stops <span class="op">=</span> gpd.read_file(<span class="st">"data/ttc_stops.geojson"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>transit_routes <span class="op">=</span> gpd.read_file(<span class="st">"data/ttc_routes.geojson"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>wards <span class="op">=</span> gpd.read_file(<span class="st">"data/city-wards.geojson"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In geopandas, we typically load data with a more agnostic <a href="https://geopandas.org/en/stable/docs/reference/api/geopandas.read_file.html">read_file()</a> function. For this workshop, we‚Äôre going to use four sources of data: - <code>transit_stops</code>: each of the stops for the TTC - <code>transit_routes</code>: each of the lines for the TTC - <code>wards</code>: polygons of City of Toronto wards (i.e.&nbsp;council districts)</p>
<p>Let‚Äôs take a look at the first layer, the transit stops. We have two columns with text, and a third with geometry data.</p>
<p>Here the data are coded as a <code>MULTILINESTRING</code>, essentially a combination of lines that combine into one object.</p>
<div id="5e0cd8c7-9a37-4f5b-ad11-7429c869b125" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>transit_routes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">STATUS</th>
<th data-quarto-table-cell-role="th">TECHNOLOGY</th>
<th data-quarto-table-cell-role="th">NAME</th>
<th data-quarto-table-cell-role="th">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Existing</td>
<td>Subway</td>
<td>Line 4: Sheppard Subway</td>
<td>MULTILINESTRING ((-79.41092 43.76152, -79.4096...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Existing</td>
<td>Subway</td>
<td>Line 1: Yonge-University Subway</td>
<td>MULTILINESTRING ((-79.52727 43.79351, -79.5261...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Existing</td>
<td>Subway</td>
<td>Line 2: Bloor-Danforth Subway</td>
<td>MULTILINESTRING ((-79.26453 43.73227, -79.2669...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>In Delivery</td>
<td>LRT / BRT</td>
<td>Eglinton Crosstown LRT</td>
<td>MULTILINESTRING ((-79.26453 43.73227, -79.2679...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>In Delivery</td>
<td>LRT / BRT</td>
<td>Eglinton Crosstown West Extension</td>
<td>MULTILINESTRING ((-79.48726 43.68739, -79.4901...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>In Delivery</td>
<td>Subway</td>
<td>Scarborough Subway Extension</td>
<td>MULTILINESTRING ((-79.26453 43.73227, -79.2630...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>In Delivery</td>
<td>LRT / BRT</td>
<td>Finch West LRT</td>
<td>MULTILINESTRING ((-79.49099 43.76349, -79.4922...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>In Delivery</td>
<td>Subway</td>
<td>Ontario Line</td>
<td>MULTILINESTRING ((-79.35168 43.69644, -79.3414...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>In Delivery</td>
<td>Subway</td>
<td>Yonge North Subway Extension</td>
<td>MULTILINESTRING ((-79.41557 43.77977, -79.4157...</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>The data can be manipulated like a regular pandas data frame. For example, if we want to filter out routes that currently do not operate, like the incomplete ‚ÄúEglinton Crosstown LRT‚Äù and defunct ‚ÄúScarborough RT‚Äù, we can do so by filtering the <code>STATUS</code> column.</p>
<div id="f55afbe9-a758-4e21-bca8-fd0cf37904d7" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>transit_routes <span class="op">=</span> transit_routes.loc[transit_routes[<span class="st">"STATUS"</span>] <span class="op">==</span> <span class="st">"Existing"</span>]</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>transit_routes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">STATUS</th>
<th data-quarto-table-cell-role="th">TECHNOLOGY</th>
<th data-quarto-table-cell-role="th">NAME</th>
<th data-quarto-table-cell-role="th">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Existing</td>
<td>Subway</td>
<td>Line 4: Sheppard Subway</td>
<td>MULTILINESTRING ((-79.41092 43.76152, -79.4096...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Existing</td>
<td>Subway</td>
<td>Line 1: Yonge-University Subway</td>
<td>MULTILINESTRING ((-79.52727 43.79351, -79.5261...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Existing</td>
<td>Subway</td>
<td>Line 2: Bloor-Danforth Subway</td>
<td>MULTILINESTRING ((-79.26453 43.73227, -79.2669...</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Let‚Äôs do the same for the stops.</p>
<p>The geometry for the stops are simpler, just <code>POINT</code>.</p>
<div id="917ed8a5-d9d6-4274-8e3d-406428e4cfd6" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>transit_stops <span class="op">=</span> transit_stops.loc[transit_stops[<span class="st">"STATUS"</span>] <span class="op">==</span> <span class="st">"Existing"</span>]</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>transit_stops</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">LOCATION_N</th>
<th data-quarto-table-cell-role="th">STATUS</th>
<th data-quarto-table-cell-role="th">TECHNOLOGY</th>
<th data-quarto-table-cell-role="th">NAME</th>
<th data-quarto-table-cell-role="th">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Kipling</td>
<td>Existing</td>
<td>Subway</td>
<td>Line 2: Bloor-Danforth Subway</td>
<td>POINT (-79.53628 43.63694)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Islington</td>
<td>Existing</td>
<td>Subway</td>
<td>Line 2: Bloor-Danforth Subway</td>
<td>POINT (-79.5246 43.64533)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Royal York</td>
<td>Existing</td>
<td>Subway</td>
<td>Line 2: Bloor-Danforth Subway</td>
<td>POINT (-79.51129 43.64812)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Old Mill</td>
<td>Existing</td>
<td>Subway</td>
<td>Line 2: Bloor-Danforth Subway</td>
<td>POINT (-79.49509 43.65008)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Jane</td>
<td>Existing</td>
<td>Subway</td>
<td>Line 2: Bloor-Danforth Subway</td>
<td>POINT (-79.48446 43.6498)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">69</td>
<td>Vaughan Metropolitan Centre</td>
<td>Existing</td>
<td>Subway</td>
<td>Line 1: Yonge-University Subway</td>
<td>POINT (-79.52727 43.79351)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">70</td>
<td>Sheppard-Yonge</td>
<td>Existing</td>
<td>Subway</td>
<td>Line 4: Sheppard Subway</td>
<td>POINT (-79.41092 43.76152)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">71</td>
<td>Spadina</td>
<td>Existing</td>
<td>Subway</td>
<td>Line 2: Bloor-Danforth Subway</td>
<td>POINT (-79.40397 43.66729)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">72</td>
<td>St. George</td>
<td>Existing</td>
<td>Subway</td>
<td>Line 2: Bloor-Danforth Subway</td>
<td>POINT (-79.39931 43.66828)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">73</td>
<td>Bloor-Yonge</td>
<td>Existing</td>
<td>Subway</td>
<td>Line 2: Bloor-Danforth Subway</td>
<td>POINT (-79.38572 43.671)</td>
</tr>
</tbody>
</table>

<p>74 rows √ó 5 columns</p>
</div>
</div>
</div>
<p>Before we go on, it‚Äôs important to have an idea of the metadata of geometric files that we work with. There‚Äôs two key parts to this. - CRS (Coordinate Reference System): The <a href="https://geopandas.org/en/stable/docs/reference/api/geopandas.GeoDataFrame.crs.html">crs</a> attribute defines a geodataset‚Äôs spatial ‚Äúcoordinate system‚Äù (e.g., latitude/longitude, meters-based projections). We can use it to ensure layers align‚Äîfor example, combining Toronto census tracts (EPSG:3347) with a Web Mercator basemap (EPSG:3857). - Total Bounds: The <a href="https://geopandas.org/en/stable/docs/reference/api/geopandas.GeoSeries.total_bounds.html">total_bounds</a> attribute returns the min/max coordinates (xmin, ymin, xmax, ymax) of your data‚Äôs extent. It‚Äôs useful for setting map zoom levels or clipping other datasets to the same area‚Äîlike focusing a transit map on Toronto‚Äôs downtown core.</p>
<div id="39685986-5cd3-4181-9bbb-3c3802664481" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>transit_stops.crs</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>&lt;Geographic 2D CRS: EPSG:4326&gt;
Name: WGS 84
Axis Info [ellipsoidal]:
- Lat[north]: Geodetic latitude (degree)
- Lon[east]: Geodetic longitude (degree)
Area of Use:
- name: World.
- bounds: (-180.0, -90.0, 180.0, 90.0)
Datum: World Geodetic System 1984 ensemble
- Ellipsoid: WGS 84
- Prime Meridian: Greenwich</code></pre>
</div>
</div>
<div id="1118c390-6ced-4094-88d7-151ebb476c04" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>transit_stops.total_bounds</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>array([-79.53628,  43.63694, -79.26453,  43.79351])</code></pre>
</div>
</div>
</section>
<section id="plotting-geographic-data" class="level2">
<h2 class="anchored" data-anchor-id="plotting-geographic-data">Plotting geographic data</h2>
<p>We explore geometry simply by plotting using <code>.plot()</code>. We can do this for any row, or the entire GeoDataFrame</p>
<div id="cc673a6a-b291-4b6a-8dc6-df561305c7e9" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>transit_stops.plot()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="spatial-data-in-python_files/figure-html/cell-9-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>This is the default plot, but we can tweak the colours, add multiple layers, and change some of the layout options using <a href="https://matplotlib.org/">matplotlib</a>, a commonly used Python plotting library. Here‚Äôs a very simple schematic of rapid transit in Toronto.</p>
<div id="c1a95366-2bf4-47b0-aa16-02ef5242bb32" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(ncols <span class="op">=</span> <span class="dv">1</span>, figsize<span class="op">=</span>(<span class="dv">4</span>, <span class="dv">4</span>))</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>wards.plot(</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    linewidth <span class="op">=</span> <span class="dv">1</span>,</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"LightGray"</span>,</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    edgecolor<span class="op">=</span><span class="st">"White"</span>,</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    ax <span class="op">=</span> ax</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>transit_stops.plot(</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"Black"</span>,</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    markersize <span class="op">=</span> <span class="dv">6</span>,</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>    ax <span class="op">=</span> ax</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>transit_routes.plot(</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>    linewidth <span class="op">=</span> <span class="dv">1</span>,</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"Black"</span>,</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>    ax <span class="op">=</span> ax</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>).set_axis_off()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="spatial-data-in-python_files/figure-html/cell-10-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="interactive-exploration" class="level2">
<h2 class="anchored" data-anchor-id="interactive-exploration">Interactive Exploration</h2>
<p>GeoPandas‚Äô <a href="https://geopandas.org/en/stable/docs/reference/api/geopandas.GeoDataFrame.explore.html">explore()</a> function generates an interactive Leaflet map (like Google Maps) from your geodata. We can use it to better understand the data we are working with and how it might be viewed from the user side on a web application (e.g., Svelte).</p>
<p>You‚Äôll need to install a couple libraries in order for this to work - matplotlib, folium, and mapclassify. This can be done in the environment that you‚Äôre working in with a command like <code>pip install folium matplotlib mapclassify</code>.</p>
<div id="48adc7d6-3300-479f-9b7b-f1f0d1b9579c" class="cell" data-scrolled="true" data-execution_count="10">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>transit_stops.explore(</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    column<span class="op">=</span><span class="st">'NAME'</span>,</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    tiles<span class="op">=</span><span class="st">"CartoDB Positron"</span>, </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    marker_kwds<span class="op">=</span>{<span class="st">"radius"</span>: <span class="dv">7</span>}</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><span style="color:#565656">Make this Notebook Trusted to load map: File -&gt; Trust Notebook</span><iframe srcdoc="<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; />
    
        <script>
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        </script>
    
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;></script>
    <script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;></script>
    <script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;></script>
    <script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;></script>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/>
    <link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/>
    
            <meta name=&quot;viewport&quot; content=&quot;width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; />
            <style>
                #map_ffd90e12df4f91172fbe8f95bcd7f397 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            </style>
        
    
                    <style>
                        .foliumtooltip {
                            
                        }
                       .foliumtooltip table{
                            margin: auto;
                        }
                        .foliumtooltip tr{
                            text-align: left;
                        }
                        .foliumtooltip th{
                            padding: 2px; padding-right: 8px;
                        }
                    </style>
            
    
    <script src=&quot;https://code.jquery.com/ui/1.12.1/jquery-ui.js&quot;></script>
    <script>$( function() {
        $( &quot;.maplegend&quot; ).draggable({
            start: function (event, ui) {
                $(this).css({
                    right: &quot;auto&quot;,
                    top: &quot;auto&quot;,
                    bottom: &quot;auto&quot;
                });
            }
        });
    });
    </script>
    <style type='text/css'>
      .maplegend {
        position: absolute;
        z-index:9999;
        background-color: rgba(255, 255, 255, .8);
        border-radius: 5px;
        box-shadow: 0 0 15px rgba(0,0,0,0.2);
        padding: 10px;
        font: 12px/14px Arial, Helvetica, sans-serif;
        right: 10px;
        bottom: 20px;
      }
      .maplegend .legend-title {
        text-align: left;
        margin-bottom: 5px;
        font-weight: bold;
        }
      .maplegend .legend-scale ul {
        margin: 0;
        margin-bottom: 0px;
        padding: 0;
        float: left;
        list-style: none;
        }
      .maplegend .legend-scale ul li {
        list-style: none;
        margin-left: 0;
        line-height: 16px;
        margin-bottom: 2px;
        }
      .maplegend ul.legend-labels li span {
        display: block;
        float: left;
        height: 14px;
        width: 14px;
        margin-right: 5px;
        margin-left: 0;
        border: 0px solid #ccc;
        }
      .maplegend .legend-source {
        color: #777;
        clear: both;
        }
      .maplegend a {
        color: #777;
        }
    </style>
    
</head>
<body>
    
    
    <div id='maplegend NAME' class='maplegend'>
        <div class='legend-title'>NAME</div>
        <div class='legend-scale'>
            <ul class='legend-labels'>
                <li><span style='background:#1f77b4'></span>Line 1: Yonge-University Subway</li>
                <li><span style='background:#8c564b'></span>Line 2: Bloor-Danforth Subway</li>
                <li><span style='background:#9edae5'></span>Line 4: Sheppard Subway</li>
            </ul>
        </div>
    </div>
    
    
            <div class=&quot;folium-map&quot; id=&quot;map_ffd90e12df4f91172fbe8f95bcd7f397&quot; ></div>
        
</body>
<script>
    
    
            var map_ffd90e12df4f91172fbe8f95bcd7f397 = L.map(
                &quot;map_ffd90e12df4f91172fbe8f95bcd7f397&quot;,
                {
                    center: [43.715225000000004, -79.400405],
                    crs: L.CRS.EPSG3857,
                    zoom: 10,
                    zoomControl: true,
                    preferCanvas: false,
                }
            );
            L.control.scale().addTo(map_ffd90e12df4f91172fbe8f95bcd7f397);

            

        
    
            var tile_layer_376e35d746d859e602788a389479bb5b = L.tileLayer(
                &quot;https://a.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png&quot;,
                {&quot;attribution&quot;: &quot;\u0026copy; \u003ca href=\&quot;https://www.openstreetmap.org/copyright\&quot;\u003eOpenStreetMap\u003c/a\u003e contributors \u0026copy; \u003ca href=\&quot;https://carto.com/attributions\&quot;\u003eCARTO\u003c/a\u003e&quot;, &quot;detectRetina&quot;: false, &quot;maxZoom&quot;: 20, &quot;minZoom&quot;: 0, &quot;noWrap&quot;: false, &quot;opacity&quot;: 1, &quot;subdomains&quot;: &quot;abc&quot;, &quot;tms&quot;: false}
            );
        
    
            tile_layer_376e35d746d859e602788a389479bb5b.addTo(map_ffd90e12df4f91172fbe8f95bcd7f397);
        
    
            map_ffd90e12df4f91172fbe8f95bcd7f397.fitBounds(
                [[43.63694, -79.53628], [43.79351, -79.26453]],
                {}
            );
        
    
        function geo_json_145c13ef958c18af3a8181e23970e9ec_styler(feature) {
            switch(feature.id) {
                case &quot;0&quot;: case &quot;1&quot;: case &quot;2&quot;: case &quot;3&quot;: case &quot;4&quot;: case &quot;5&quot;: case &quot;6&quot;: case &quot;7&quot;: case &quot;8&quot;: case &quot;9&quot;: case &quot;10&quot;: case &quot;11&quot;: case &quot;12&quot;: case &quot;13&quot;: case &quot;15&quot;: case &quot;17&quot;: case &quot;18&quot;: case &quot;19&quot;: case &quot;20&quot;: case &quot;21&quot;: case &quot;22&quot;: case &quot;23&quot;: case &quot;24&quot;: case &quot;25&quot;: case &quot;26&quot;: case &quot;27&quot;: case &quot;28&quot;: case &quot;29&quot;: case &quot;71&quot;: case &quot;72&quot;: case &quot;73&quot;: 
                    return {&quot;color&quot;: &quot;#8c564b&quot;, &quot;fillColor&quot;: &quot;#8c564b&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};
                case &quot;14&quot;: case &quot;16&quot;: case &quot;30&quot;: case &quot;31&quot;: case &quot;32&quot;: case &quot;33&quot;: case &quot;34&quot;: case &quot;35&quot;: case &quot;36&quot;: case &quot;37&quot;: case &quot;38&quot;: case &quot;39&quot;: case &quot;40&quot;: case &quot;41&quot;: case &quot;42&quot;: case &quot;43&quot;: case &quot;44&quot;: case &quot;45&quot;: case &quot;46&quot;: case &quot;47&quot;: case &quot;48&quot;: case &quot;49&quot;: case &quot;50&quot;: case &quot;51&quot;: case &quot;52&quot;: case &quot;53&quot;: case &quot;54&quot;: case &quot;55&quot;: case &quot;56&quot;: case &quot;57&quot;: case &quot;58&quot;: case &quot;59&quot;: case &quot;64&quot;: case &quot;65&quot;: case &quot;66&quot;: case &quot;67&quot;: case &quot;68&quot;: case &quot;69&quot;: 
                    return {&quot;color&quot;: &quot;#1f77b4&quot;, &quot;fillColor&quot;: &quot;#1f77b4&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};
                default:
                    return {&quot;color&quot;: &quot;#9edae5&quot;, &quot;fillColor&quot;: &quot;#9edae5&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};
            }
        }
        function geo_json_145c13ef958c18af3a8181e23970e9ec_highlighter(feature) {
            switch(feature.id) {
                default:
                    return {&quot;fillOpacity&quot;: 0.75};
            }
        }
        function geo_json_145c13ef958c18af3a8181e23970e9ec_pointToLayer(feature, latlng) {
            var opts = {&quot;bubblingMouseEvents&quot;: true, &quot;color&quot;: &quot;#3388ff&quot;, &quot;dashArray&quot;: null, &quot;dashOffset&quot;: null, &quot;fill&quot;: true, &quot;fillColor&quot;: &quot;#3388ff&quot;, &quot;fillOpacity&quot;: 0.2, &quot;fillRule&quot;: &quot;evenodd&quot;, &quot;lineCap&quot;: &quot;round&quot;, &quot;lineJoin&quot;: &quot;round&quot;, &quot;opacity&quot;: 1.0, &quot;radius&quot;: 7, &quot;stroke&quot;: true, &quot;weight&quot;: 3};
            
            let style = geo_json_145c13ef958c18af3a8181e23970e9ec_styler(feature)
            Object.assign(opts, style)
            
            return new L.CircleMarker(latlng, opts)
        }

        function geo_json_145c13ef958c18af3a8181e23970e9ec_onEachFeature(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    if(typeof e.target.setStyle === &quot;function&quot;){
                            geo_json_145c13ef958c18af3a8181e23970e9ec.resetStyle(e.target);
                    }
                },
                mouseover: function(e) {
                    if(typeof e.target.setStyle === &quot;function&quot;){
                        const highlightStyle = geo_json_145c13ef958c18af3a8181e23970e9ec_highlighter(e.target.feature)
                        e.target.setStyle(highlightStyle);
                    }
                },
            });
        };
        var geo_json_145c13ef958c18af3a8181e23970e9ec = L.geoJson(null, {
                onEachFeature: geo_json_145c13ef958c18af3a8181e23970e9ec_onEachFeature,
            
                style: geo_json_145c13ef958c18af3a8181e23970e9ec_styler,
                pointToLayer: geo_json_145c13ef958c18af3a8181e23970e9ec_pointToLayer,
        });

        function geo_json_145c13ef958c18af3a8181e23970e9ec_add (data) {
            geo_json_145c13ef958c18af3a8181e23970e9ec
                .addData(data);
        }
            geo_json_145c13ef958c18af3a8181e23970e9ec_add({&quot;bbox&quot;: [-79.53628, 43.63694, -79.26453, 43.79351], &quot;features&quot;: [{&quot;bbox&quot;: [-79.53628, 43.63694, -79.53628, 43.63694], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.53628, 43.63694], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Kipling&quot;, &quot;NAME&quot;: &quot;Line 2: Bloor-Danforth Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#8c564b&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.5246, 43.64533, -79.5246, 43.64533], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.5246, 43.64533], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;1&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Islington&quot;, &quot;NAME&quot;: &quot;Line 2: Bloor-Danforth Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#8c564b&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.51129, 43.64812, -79.51129, 43.64812], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.51129, 43.64812], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;2&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Royal York&quot;, &quot;NAME&quot;: &quot;Line 2: Bloor-Danforth Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#8c564b&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.49509, 43.65008, -79.49509, 43.65008], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.49509, 43.65008], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;3&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Old Mill&quot;, &quot;NAME&quot;: &quot;Line 2: Bloor-Danforth Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#8c564b&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.48446, 43.6498, -79.48446, 43.6498], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.48446, 43.6498], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;4&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Jane&quot;, &quot;NAME&quot;: &quot;Line 2: Bloor-Danforth Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#8c564b&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.47621, 43.65166, -79.47621, 43.65166], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.47621, 43.65166], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;5&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Runnymede&quot;, &quot;NAME&quot;: &quot;Line 2: Bloor-Danforth Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#8c564b&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.46622, 43.65406, -79.46622, 43.65406], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.46622, 43.65406], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;6&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;High Park&quot;, &quot;NAME&quot;: &quot;Line 2: Bloor-Danforth Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#8c564b&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.45985, 43.65548, -79.45985, 43.65548], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.45985, 43.65548], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;7&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Keele&quot;, &quot;NAME&quot;: &quot;Line 2: Bloor-Danforth Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#8c564b&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.45241, 43.65718, -79.45241, 43.65718], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.45241, 43.65718], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;8&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Dundas West&quot;, &quot;NAME&quot;: &quot;Line 2: Bloor-Danforth Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#8c564b&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.44262, 43.65913, -79.44262, 43.65913], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.44262, 43.65913], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;9&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Lansdowne&quot;, &quot;NAME&quot;: &quot;Line 2: Bloor-Danforth Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#8c564b&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.43549, 43.66025, -79.43549, 43.66025], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.43549, 43.66025], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;10&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Dufferin&quot;, &quot;NAME&quot;: &quot;Line 2: Bloor-Danforth Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#8c564b&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.42594, 43.66242, -79.42594, 43.66242], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.42594, 43.66242], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;11&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Ossington&quot;, &quot;NAME&quot;: &quot;Line 2: Bloor-Danforth Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#8c564b&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.41835, 43.66408, -79.41835, 43.66408], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.41835, 43.66408], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;12&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Christie&quot;, &quot;NAME&quot;: &quot;Line 2: Bloor-Danforth Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#8c564b&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.41149, 43.66573, -79.41149, 43.66573], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.41149, 43.66573], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;13&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Bathurst&quot;, &quot;NAME&quot;: &quot;Line 2: Bloor-Danforth Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#8c564b&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.39931, 43.66828, -79.39931, 43.66828], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.39931, 43.66828], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;14&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;St. George&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.38987, 43.67022, -79.38987, 43.67022], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.38987, 43.67022], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;15&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Bay&quot;, &quot;NAME&quot;: &quot;Line 2: Bloor-Danforth Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#8c564b&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.38572, 43.671, -79.38572, 43.671], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.38572, 43.671], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;16&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Bloor-Yonge&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.37685, 43.67236, -79.37685, 43.67236], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.37685, 43.67236], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;17&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Sherbourne&quot;, &quot;NAME&quot;: &quot;Line 2: Bloor-Danforth Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#8c564b&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.3685, 43.67387, -79.3685, 43.67387], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.3685, 43.67387], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;18&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Castle Frank&quot;, &quot;NAME&quot;: &quot;Line 2: Bloor-Danforth Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#8c564b&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.35879, 43.67684, -79.35879, 43.67684], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.35879, 43.67684], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;19&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Broadview&quot;, &quot;NAME&quot;: &quot;Line 2: Bloor-Danforth Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#8c564b&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.35226, 43.67835, -79.35226, 43.67835], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.35226, 43.67835], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;20&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Chester&quot;, &quot;NAME&quot;: &quot;Line 2: Bloor-Danforth Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#8c564b&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.34518, 43.67974, -79.34518, 43.67974], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.34518, 43.67974], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;21&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Pape&quot;, &quot;NAME&quot;: &quot;Line 2: Bloor-Danforth Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#8c564b&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.33778, 43.68118, -79.33778, 43.68118], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.33778, 43.68118], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;22&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Donlands&quot;, &quot;NAME&quot;: &quot;Line 2: Bloor-Danforth Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#8c564b&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.33029, 43.68281, -79.33029, 43.68281], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.33029, 43.68281], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;23&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Greenwood&quot;, &quot;NAME&quot;: &quot;Line 2: Bloor-Danforth Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#8c564b&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.3231, 43.68433, -79.3231, 43.68433], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.3231, 43.68433], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;24&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Coxwell&quot;, &quot;NAME&quot;: &quot;Line 2: Bloor-Danforth Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#8c564b&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.31299, 43.68655, -79.31299, 43.68655], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.31299, 43.68655], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;25&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Woodbine&quot;, &quot;NAME&quot;: &quot;Line 2: Bloor-Danforth Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#8c564b&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.30202, 43.68898, -79.30202, 43.68898], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.30202, 43.68898], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;26&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Main Street&quot;, &quot;NAME&quot;: &quot;Line 2: Bloor-Danforth Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#8c564b&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.28945, 43.69462, -79.28945, 43.69462], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.28945, 43.69462], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;27&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Victoria Park&quot;, &quot;NAME&quot;: &quot;Line 2: Bloor-Danforth Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#8c564b&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.2792, 43.71119, -79.2792, 43.71119], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.2792, 43.71119], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;28&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Warden&quot;, &quot;NAME&quot;: &quot;Line 2: Bloor-Danforth Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#8c564b&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.26453, 43.73227, -79.26453, 43.73227], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.26453, 43.73227], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;29&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Kennedy&quot;, &quot;NAME&quot;: &quot;Line 2: Bloor-Danforth Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#8c564b&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.37914, 43.64602, -79.37914, 43.64602], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.37914, 43.64602], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;30&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Union&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.3848, 43.64766, -79.3848, 43.64766], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.3848, 43.64766], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;31&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;St. Andrew&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.37791, 43.64915, -79.37791, 43.64915], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.37791, 43.64915], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;32&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;King&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.38662, 43.65086, -79.38662, 43.65086], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.38662, 43.65086], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;33&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Osgoode&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.37926, 43.65244, -79.37926, 43.65244], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.37926, 43.65244], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;34&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Queen&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.38831, 43.65479, -79.38831, 43.65479], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.38831, 43.65479], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;35&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;St. Patrick&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.38091, 43.65633, -79.38091, 43.65633], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.38091, 43.65633], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;36&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Dundas&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.39047, 43.65986, -79.39047, 43.65986], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.39047, 43.65986], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;37&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Queen\u0027s Park&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.38314, 43.66145, -79.38314, 43.66145], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.38314, 43.66145], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;38&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;College&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.38353, 43.66527, -79.38353, 43.66527], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.38353, 43.66527], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;39&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Wellesley&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.39357, 43.66737, -79.39357, 43.66737], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.39357, 43.66737], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;40&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Museum&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.38852, 43.6771, -79.38852, 43.6771], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.38852, 43.6771], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;41&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Rosedale&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.39125, 43.68334, -79.39125, 43.68334], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.39125, 43.68334], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;42&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Summerhill&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.3934, 43.6883, -79.3934, 43.6883], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.3934, 43.6883], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;43&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;St. Clair&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.39727, 43.69799, -79.39727, 43.69799], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.39727, 43.69799], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;44&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Davisville&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.39844, 43.70673, -79.39844, 43.70673], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.39844, 43.70673], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;45&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Eglinton&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.40218, 43.72496, -79.40218, 43.72496], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.40218, 43.72496], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;46&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Lawrence&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.4062, 43.74427, -79.4062, 43.74427], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.4062, 43.74427], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;47&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;York Mills&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.41092, 43.76152, -79.41092, 43.76152], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.41092, 43.76152], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;48&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Sheppard-Yonge&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.41278, 43.76884, -79.41278, 43.76884], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.41278, 43.76884], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;49&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;North York Centre&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.41557, 43.77977, -79.41557, 43.77977], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.41557, 43.77977], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;50&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Finch&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.40476, 43.66896, -79.40476, 43.66896], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.40476, 43.66896], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;51&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Spadina&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.40711, 43.67486, -79.40711, 43.67486], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.40711, 43.67486], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;52&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Dupont&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.41534, 43.68382, -79.41534, 43.68382], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.41534, 43.68382], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;53&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;St Clair West&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.43599, 43.69884, -79.43599, 43.69884], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.43599, 43.69884], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;54&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Eglinton West&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.44118, 43.70954, -79.44118, 43.70954], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.44118, 43.70954], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;55&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Glencairn&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.44419, 43.71606, -79.44419, 43.71606], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.44419, 43.71606], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;56&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Lawrence West&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.44787, 43.72562, -79.44787, 43.72562], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.44787, 43.72562], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;57&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Yorkdale&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.44992, 43.73409, -79.44992, 43.73409], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.44992, 43.73409], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;58&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Wilson&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.46248, 43.75044, -79.46248, 43.75044], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.46248, 43.75044], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;59&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Sheppard West&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.38776, 43.76666, -79.38776, 43.76666], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.38776, 43.76666], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;60&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Bayview&quot;, &quot;NAME&quot;: &quot;Line 4: Sheppard Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#9edae5&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.37665, 43.76919, -79.37665, 43.76919], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.37665, 43.76919], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;61&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Bessarion&quot;, &quot;NAME&quot;: &quot;Line 4: Sheppard Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#9edae5&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.36814, 43.77102, -79.36814, 43.77102], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.36814, 43.77102], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;62&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Leslie&quot;, &quot;NAME&quot;: &quot;Line 4: Sheppard Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#9edae5&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.34698, 43.77514, -79.34698, 43.77514], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.34698, 43.77514], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;63&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Don Mills&quot;, &quot;NAME&quot;: &quot;Line 4: Sheppard Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#9edae5&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.47833, 43.75361, -79.47833, 43.75361], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.47833, 43.75361], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;64&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Downsview Park&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.49099, 43.76349, -79.49099, 43.76349], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.49099, 43.76349], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;65&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Finch West&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.49964, 43.77413, -79.49964, 43.77413], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.49964, 43.77413], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;66&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;York University&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.51164, 43.77752, -79.51164, 43.77752], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.51164, 43.77752], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;67&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Pioneer Village&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.52324, 43.78356, -79.52324, 43.78356], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.52324, 43.78356], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;68&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Highway 407&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.52727, 43.79351, -79.52727, 43.79351], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.52727, 43.79351], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;69&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Vaughan Metropolitan Centre&quot;, &quot;NAME&quot;: &quot;Line 1: Yonge-University Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#1f77b4&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.41092, 43.76152, -79.41092, 43.76152], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.41092, 43.76152], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;70&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Sheppard-Yonge&quot;, &quot;NAME&quot;: &quot;Line 4: Sheppard Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#9edae5&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.40397, 43.66729, -79.40397, 43.66729], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.40397, 43.66729], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;71&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Spadina&quot;, &quot;NAME&quot;: &quot;Line 2: Bloor-Danforth Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#8c564b&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.39931, 43.66828, -79.39931, 43.66828], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.39931, 43.66828], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;72&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;St. George&quot;, &quot;NAME&quot;: &quot;Line 2: Bloor-Danforth Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#8c564b&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-79.38572, 43.671, -79.38572, 43.671], &quot;geometry&quot;: {&quot;coordinates&quot;: [-79.38572, 43.671], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;73&quot;, &quot;properties&quot;: {&quot;LOCATION_N&quot;: &quot;Bloor-Yonge&quot;, &quot;NAME&quot;: &quot;Line 2: Bloor-Danforth Subway&quot;, &quot;STATUS&quot;: &quot;Existing&quot;, &quot;TECHNOLOGY&quot;: &quot;Subway&quot;, &quot;__folium_color&quot;: &quot;#8c564b&quot;}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});

        
    
    geo_json_145c13ef958c18af3a8181e23970e9ec.bindTooltip(
    function(layer){
    let div = L.DomUtil.create('div');
    
    let handleObject = feature=>typeof(feature)=='object' ? JSON.stringify(feature) : feature;
    let fields = [&quot;LOCATION_N&quot;, &quot;STATUS&quot;, &quot;TECHNOLOGY&quot;, &quot;NAME&quot;];
    let aliases = [&quot;LOCATION_N&quot;, &quot;STATUS&quot;, &quot;TECHNOLOGY&quot;, &quot;NAME&quot;];
    let table = '<table>' +
        String(
        fields.map(
        (v,i)=>
        `<tr>
            <th>${aliases[i]}</th>
            
            <td>${handleObject(layer.feature.properties[v])}</td>
        </tr>`).join(''))
    +'</table>';
    div.innerHTML=table;
    
    return div
    }
    ,{&quot;className&quot;: &quot;foliumtooltip&quot;, &quot;sticky&quot;: true});
                     
    
            geo_json_145c13ef958c18af3a8181e23970e9ec.addTo(map_ffd90e12df4f91172fbe8f95bcd7f397);
        
</script>
</html>" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen=""></iframe></div></div>
</div>
</div>
</section>
<section id="geomtery-properties" class="level2">
<h2 class="anchored" data-anchor-id="geomtery-properties">Geomtery properties</h2>
<p><code>geopandas</code> has a number of functions you can run on geometry columns that can be super useful for analyzing and summarizing data. Here‚Äôs a list of a few examples of using these to create a new column of data (more can be found in the <a href="https://geopandas.org/en/stable/docs.html">official documentation</a>)</p>
<table class="caption-top table">
<colgroup>
<col style="width: 17%">
<col style="width: 39%">
<col style="width: 43%">
</colgroup>
<thead>
<tr class="header">
<th>Property</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>.area</code></td>
<td>Area of the geometry (in CRS units)</td>
<td><code>gdf["area"] = gdf.geometry.area</code></td>
</tr>
<tr class="even">
<td><code>.length</code></td>
<td>Line length (perimeter length for polygons)</td>
<td><code>gdf["length"] = gdf.geometry.length</code></td>
</tr>
<tr class="odd">
<td><code>.is_valid</code></td>
<td>Geometry validity check</td>
<td><code>gdf["valid"] = gdf.geometry.is_valid</code></td>
</tr>
<tr class="even">
<td><code>.is_empty</code></td>
<td>Whether geometry is empty</td>
<td><code>gdf["empty"] = gdf.geometry.is_empty</code></td>
</tr>
<tr class="odd">
<td><code>.is_simple</code></td>
<td>No self-intersections</td>
<td><code>gdf["simple"] = gdf.geometry.is_simple</code></td>
</tr>
<tr class="even">
<td><code>.type</code></td>
<td>Type of geometry (e.g., Polygon)</td>
<td><code>gdf["geom_type"] = gdf.geometry.type</code></td>
</tr>
<tr class="odd">
<td><code>.bounds</code></td>
<td>Bounding box as (minx, miny, maxx, maxy)</td>
<td><code>gdf["bounds"] = gdf.geometry.bounds</code></td>
</tr>
</tbody>
</table>
</section>
<section id="processing-and-analyzing-spatial-data" class="level2">
<h2 class="anchored" data-anchor-id="processing-and-analyzing-spatial-data">Processing and analyzing spatial data</h2>
<p>This tutorial provided quick overview of how we can working with spatial data in <code>geopandas</code>. However, this was just scratching the surface.</p>
<p>If you‚Äôre interested the why and how of spatial data processing, i.e.&nbsp;about covnerting spatial data from one format to another (e.g.&nbsp;generating centroids of polygons, buffers around points, joining and linking multiple spatial datasets to each other, etc.), check out our <a href="link">Processing spatial data</a> tutorial.</p>
<p>Beyond that, you can check out the following Python libraries for working with spatial data:</p>
<ul>
<li><a href="https://shapely.readthedocs.io/en/stable/manual.html">Shapely</a> (wide variety of tools for manipulation of 2d geometry data, some of which <code>geopandas</code> uses.)</li>
<li><a href="https://pysal.org/pysal/">Pysal</a> (spatial data analysis library, including various descriptive statistics and spatial modelling functions)</li>
<li><a href="https://shapely.readthedocs.io/en/stable/">Rasterio</a> (library for working with raster data)</li>
<li><a href="https://python-visualization.github.io/folium/latest/">Folium</a> (more interactive maps!)</li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>